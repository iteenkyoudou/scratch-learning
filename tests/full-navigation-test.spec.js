const { test, expect } = require('@playwright/test');
const path = require('path');

test.describe('ScratchÂ≠¶Áøí„Çµ„Ç§„Éà - ÂÖ®‰Ωì„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„ÉÜ„Çπ„Éà', () => {
  
  // ÂÖ®„É°„Ç§„É≥Â≠¶Áøí„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆ„ÉÜ„Çπ„Éà
  test('ÂÖ®„É°„Ç§„É≥„É¨„ÉÉ„Çπ„É≥„ÅÆÁîªÈù¢ÈÅ∑Áßª„ÉÜ„Çπ„Éà', async ({ page }) => {
    const filePath = path.join(__dirname, '..', 'index.html');
    await page.goto(`file://${filePath}`);
    
    console.log('üß™ ÂÖ®„É°„Ç§„É≥„É¨„ÉÉ„Çπ„É≥ÈÅ∑Áßª„ÉÜ„Çπ„ÉàÈñãÂßã');
    
    // „ÉÜ„Çπ„ÉàÂØæË±°„ÅÆ„É°„Ç§„É≥„É¨„ÉÉ„Çπ„É≥
    const mainLessons = [
      { name: '„Éó„É≠„Ç∞„É©„É†„ÅÆÊµÅ„Çå', onclick: 'showProgramFlow()', sectionId: 'program-flow' },
      { name: '„É´„Éº„Éó', onclick: 'showLoop()', sectionId: 'loop' },
      { name: 'Â∫ßÊ®ô', onclick: 'showCoordinates()', sectionId: 'coordinates' },
      { name: '„Ç≥„Çπ„ÉÅ„É•„Éº„É†', onclick: 'showCostumes()', sectionId: 'costumes-section' }
    ];
    
    for (const lesson of mainLessons) {
      console.log(`‚úÖ ${lesson.name}„É¨„ÉÉ„Çπ„É≥„Çí„ÉÜ„Çπ„Éà`);
      
      // „Éõ„Éº„É†„Å´Êàª„Çã
      await page.evaluate(() => showHome());
      await expect(page.locator('#home-view')).toBeVisible();
      
      // „É¨„ÉÉ„Çπ„É≥„Ç´„Éº„Éâ„Çí„ÇØ„É™„ÉÉ„ÇØ
      const lessonCard = page.locator(`[onclick="${lesson.onclick}"]`);
      await expect(lessonCard).toBeVisible();
      await lessonCard.click();
      
      // „Çª„ÇØ„Ç∑„Éß„É≥Ë°®Á§∫Á¢∫Ë™ç
      await expect(page.locator(`#${lesson.sectionId}`)).toBeVisible();
      await expect(page.locator('#home-view')).toBeHidden();
      console.log(`‚Üí ${lesson.name}„Çª„ÇØ„Ç∑„Éß„É≥Ë°®Á§∫: ‚úÖ ÊàêÂäü`);
      
      // „Éõ„Éº„É†„Éú„Çø„É≥„ÅÆÂ≠òÂú®Á¢∫Ë™ç
      try {
        const homeButton = page.locator(`#${lesson.sectionId} >> text=„Éõ„Éº„É†„Å´Êàª„Çã`);
        await expect(homeButton).toBeVisible({ timeout: 1000 });
        console.log(`‚Üí ${lesson.name}„ÅÆ„Éõ„Éº„É†„Éú„Çø„É≥: ‚úÖ „ÅÇ„Çä`);
      } catch (error) {
        console.log(`‚Üí ${lesson.name}„ÅÆ„Éõ„Éº„É†„Éú„Çø„É≥: ‚ùå „Å™„Åó - „Éê„Ç∞Áô∫Ë¶ã!`);
      }
    }
    
    console.log('üéâ ÂÖ®„É°„Ç§„É≥„É¨„ÉÉ„Çπ„É≥ÈÅ∑Áßª„ÉÜ„Çπ„ÉàÂÆå‰∫Ü!');
  });
  
  // „É°„Éã„É•„Éº„Éè„Éñ„ÅÆ„ÉÜ„Çπ„Éà
  test('„É°„Éã„É•„Éº„Éè„Éñ„ÅÆÁîªÈù¢ÈÅ∑Áßª„ÉÜ„Çπ„Éà', async ({ page }) => {
    const filePath = path.join(__dirname, '..', 'index.html');
    await page.goto(`file://${filePath}`);
    
    console.log('üß™ „É°„Éã„É•„Éº„Éè„ÉñÈÅ∑Áßª„ÉÜ„Çπ„ÉàÈñãÂßã');
    
    // „ÉÜ„Çπ„ÉàÂØæË±°„ÅÆ„É°„Éã„É•„Éº„Éè„Éñ
    const menuHubs = [
      { name: 'Êù°‰ª∂ÂàÜÂ≤ê„É°„Éã„É•„Éº', onclick: 'showConditionalMenu()', sectionId: 'conditional-menu' },
      { name: 'Â§âÊï∞„É°„Éã„É•„Éº', onclick: 'showVariablesMenu()', sectionId: 'variables-menu' },
      { name: '„ÇØ„É≠„Éº„É≥„É°„Éã„É•„Éº', onclick: 'console.log(\'Clone card clicked\'); showClonesMenu();', sectionId: 'clones-menu' },
      { name: 'Èü≥„É°„Éã„É•„Éº', onclick: 'showSoundsMenu()', sectionId: 'sounds-menu' },
      { name: '„É°„ÉÉ„Çª„Éº„Ç∏„É°„Éã„É•„Éº', onclick: 'showMessagesMenu()', sectionId: 'messages-menu' },
      { name: 'ËÉåÊôØ„É°„Éã„É•„Éº', onclick: 'showBackgroundsMenu()', sectionId: 'backgrounds-menu' },
      { name: '„É™„Çπ„Éà„É°„Éã„É•„Éº', onclick: 'showListsMenu()', sectionId: 'lists-menu' },
      { name: '„Éö„É≥„É°„Éã„É•„Éº', onclick: 'showPenMenu()', sectionId: 'pen-menu' }
    ];
    
    for (const menu of menuHubs) {
      console.log(`‚úÖ ${menu.name}„Çí„ÉÜ„Çπ„Éà`);
      
      // „Éõ„Éº„É†„Å´Êàª„Çã
      await page.evaluate(() => showHome());
      await expect(page.locator('#home-view')).toBeVisible();
      
      // „É°„Éã„É•„Éº„Ç´„Éº„Éâ„Çí„ÇØ„É™„ÉÉ„ÇØ
      const menuCard = page.locator(`[onclick="${menu.onclick}"]`);
      await expect(menuCard).toBeVisible();
      await menuCard.click();
      
      // „É°„Éã„É•„ÉºË°®Á§∫Á¢∫Ë™ç
      try {
        await expect(page.locator(`#${menu.sectionId}`)).toBeVisible({ timeout: 2000 });
        await expect(page.locator('#home-view')).toBeHidden();
        console.log(`‚Üí ${menu.name}Ë°®Á§∫: ‚úÖ ÊàêÂäü`);
        
        // „Éõ„Éº„É†„Éú„Çø„É≥„ÅÆÂ≠òÂú®Á¢∫Ë™ç
        try {
          const homeButton = page.locator(`#${menu.sectionId} >> text=„Éõ„Éº„É†„Å´Êàª„Çã`);
          await expect(homeButton).toBeVisible({ timeout: 1000 });
          console.log(`‚Üí ${menu.name}„ÅÆ„Éõ„Éº„É†„Éú„Çø„É≥: ‚úÖ „ÅÇ„Çä`);
        } catch (error) {
          console.log(`‚Üí ${menu.name}„ÅÆ„Éõ„Éº„É†„Éú„Çø„É≥: ‚ùå „Å™„Åó - Ë¶ÅÁ¢∫Ë™ç`);
        }
      } catch (error) {
        console.log(`‚Üí ${menu.name}Ë°®Á§∫: ‚ùå Â§±Êïó - „Çª„ÇØ„Ç∑„Éß„É≥„ÅåË¶ã„Å§„Åã„Çâ„Å™„ÅÑ`);
      }
    }
    
    console.log('üéâ „É°„Éã„É•„Éº„Éè„ÉñÈÅ∑Áßª„ÉÜ„Çπ„ÉàÂÆå‰∫Ü!');
  });
  
  // Êù°‰ª∂ÂàÜÂ≤ê„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆ„ÉÜ„Çπ„Éà
  test('Êù°‰ª∂ÂàÜÂ≤ê„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„ÉÜ„Çπ„Éà', async ({ page }) => {
    const filePath = path.join(__dirname, '..', 'index.html');
    await page.goto(`file://${filePath}`);
    
    console.log('üß™ Êù°‰ª∂ÂàÜÂ≤ê„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„ÉÜ„Çπ„ÉàÈñãÂßã');
    
    // Êù°‰ª∂ÂàÜÂ≤ê„É°„Éã„É•„Éº„Å´ÁßªÂãï
    await page.locator('[onclick="showConditionalMenu()"]').click();
    await expect(page.locator('#conditional-menu')).toBeVisible();
    
    const conditionalSubSections = [
      { name: 'if-then', onclick: 'showIfThen()', sectionId: 'if-then-section' },
      { name: 'if-else', onclick: 'showIfElse()', sectionId: 'if-else-section' }
    ];
    
    for (const subSection of conditionalSubSections) {
      console.log(`‚úÖ ${subSection.name}„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„Çí„ÉÜ„Çπ„Éà`);
      
      // Êù°‰ª∂ÂàÜÂ≤ê„É°„Éã„É•„Éº„Å´Êàª„Çã
      await page.evaluate(() => showConditionalMenu());
      await expect(page.locator('#conditional-menu')).toBeVisible();
      
      // „Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„Çí„ÇØ„É™„ÉÉ„ÇØ
      const subCard = page.locator(`[onclick="${subSection.onclick}"]`);
      await expect(subCard).toBeVisible();
      await subCard.click();
      
      // „Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥Ë°®Á§∫Á¢∫Ë™ç
      await expect(page.locator(`#${subSection.sectionId}`)).toBeVisible();
      await expect(page.locator('#conditional-menu')).toBeHidden();
      console.log(`‚Üí ${subSection.name}„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥Ë°®Á§∫: ‚úÖ ÊàêÂäü`);
      
      // „Éõ„Éº„É†„Éú„Çø„É≥„ÅÆÂ≠òÂú®Á¢∫Ë™çÔºà‰øÆÊ≠£Âæå„ÅÆÊúüÂæÖÂÄ§Ôºö„Åô„Åπ„Å¶Â≠òÂú®„Åô„Åπ„ÅçÔºâ
      try {
        const homeButton = page.locator(`#${subSection.sectionId} >> text=„Éõ„Éº„É†„Å´Êàª„Çã`);
        await expect(homeButton).toBeVisible({ timeout: 1000 });
        console.log(`‚Üí ${subSection.name}„ÅÆ„Éõ„Éº„É†„Éú„Çø„É≥: ‚úÖ „ÅÇ„Çä`);
      } catch (error) {
        console.log(`‚Üí ${subSection.name}„ÅÆ„Éõ„Éº„É†„Éú„Çø„É≥: ‚ùå „Å™„Åó - ‰øÆÊ≠£„ÅåÂøÖË¶Å!`);
      }
    }
    
    console.log('üéâ Êù°‰ª∂ÂàÜÂ≤ê„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„ÉÜ„Çπ„ÉàÂÆå‰∫Ü!');
  });
  
  // Â§âÊï∞„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆ„ÉÜ„Çπ„Éà
  test('Â§âÊï∞„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„ÉÜ„Çπ„Éà', async ({ page }) => {
    const filePath = path.join(__dirname, '..', 'index.html');
    await page.goto(`file://${filePath}`);
    
    console.log('üß™ Â§âÊï∞„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„ÉÜ„Çπ„ÉàÈñãÂßã');
    
    // Â§âÊï∞„É°„Éã„É•„Éº„Å´ÁßªÂãï
    await page.locator('[onclick="showVariablesMenu()"]').click();
    
    try {
      await expect(page.locator('#variables-menu')).toBeVisible({ timeout: 2000 });
      
      const variableSubSections = [
        { name: '‰ΩìÂäõ„Ç∑„Çπ„ÉÜ„É†', onclick: 'showHealthSystem()', sectionId: 'health-system' },
        { name: '„Çπ„Ç≥„Ç¢„Ç∑„Çπ„ÉÜ„É†', onclick: 'showScoreSystem()', sectionId: 'score-system' },
        { name: 'ÊñáÂ≠óÂ§âÊï∞', onclick: 'showStringVariables()', sectionId: 'string-variables' }
      ];
      
      for (const subSection of variableSubSections) {
        console.log(`‚úÖ ${subSection.name}„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„Çí„ÉÜ„Çπ„Éà`);
        
        // Â§âÊï∞„É°„Éã„É•„Éº„Å´Êàª„Çã
        await page.evaluate(() => showVariablesMenu());
        await expect(page.locator('#variables-menu')).toBeVisible();
        
        // „Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„Çí„ÇØ„É™„ÉÉ„ÇØ
        try {
          const subCard = page.locator(`[onclick="${subSection.onclick}"]`);
          await expect(subCard).toBeVisible({ timeout: 1000 });
          await subCard.click();
          
          // „Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥Ë°®Á§∫Á¢∫Ë™ç
          await expect(page.locator(`#${subSection.sectionId}`)).toBeVisible();
          console.log(`‚Üí ${subSection.name}„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥Ë°®Á§∫: ‚úÖ ÊàêÂäü`);
          
          // „Éõ„Éº„É†„Éú„Çø„É≥„ÅÆÂ≠òÂú®Á¢∫Ë™çÔºà‰øÆÊ≠£Âæå„ÅÆÊúüÂæÖÂÄ§Ôºö„Åô„Åπ„Å¶Â≠òÂú®„Åô„Åπ„ÅçÔºâ
          try {
            const homeButton = page.locator(`#${subSection.sectionId} >> text=„Éõ„Éº„É†„Å´Êàª„Çã`);
            await expect(homeButton).toBeVisible({ timeout: 1000 });
            console.log(`‚Üí ${subSection.name}„ÅÆ„Éõ„Éº„É†„Éú„Çø„É≥: ‚úÖ „ÅÇ„Çä`);
          } catch (error) {
            console.log(`‚Üí ${subSection.name}„ÅÆ„Éõ„Éº„É†„Éú„Çø„É≥: ‚ùå „Å™„Åó - ‰øÆÊ≠£„ÅåÂøÖË¶Å!`);
          }
        } catch (error) {
          console.log(`‚Üí ${subSection.name}„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥: ‚ùå Â§±Êïó - „Éú„Çø„É≥„Åæ„Åü„ÅØ„Çª„ÇØ„Ç∑„Éß„É≥„ÅåË¶ã„Å§„Åã„Çâ„Å™„ÅÑ`);
        }
      }
    } catch (error) {
      console.log('‚Üí Â§âÊï∞„É°„Éã„É•„ÉºË°®Á§∫: ‚ùå Â§±Êïó - „É°„Éã„É•„Éº„ÅåË¶ã„Å§„Åã„Çâ„Å™„ÅÑ');
    }
    
    console.log('üéâ Â§âÊï∞„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„ÉÜ„Çπ„ÉàÂÆå‰∫Ü!');
  });
  
  // „Çπ„ÉÜ„ÉÉ„ÉóÈÄ≤Ë°å„Éú„Çø„É≥„ÅÆ„ÉÜ„Çπ„Éà
  test('„Çπ„ÉÜ„ÉÉ„ÉóÈÄ≤Ë°å„Éú„Çø„É≥„ÉÜ„Çπ„Éà', async ({ page }) => {
    const filePath = path.join(__dirname, '..', 'index.html');
    await page.goto(`file://${filePath}`);
    
    console.log('üß™ „Çπ„ÉÜ„ÉÉ„ÉóÈÄ≤Ë°å„Éú„Çø„É≥„ÉÜ„Çπ„ÉàÈñãÂßã');
    
    // „É´„Éº„Éó„É¨„ÉÉ„Çπ„É≥„Åß„Çπ„ÉÜ„ÉÉ„ÉóÈÄ≤Ë°å„Çí„ÉÜ„Çπ„Éà
    await page.locator('[onclick="showLoop()"]').click();
    await expect(page.locator('#loop')).toBeVisible();
    
    console.log('‚úÖ „É´„Éº„Éó„É¨„ÉÉ„Çπ„É≥„Åß„Çπ„ÉÜ„ÉÉ„ÉóÈÄ≤Ë°å„Çí„ÉÜ„Çπ„Éà');
    
    // Ê¨°„Å∏„Éú„Çø„É≥„ÅÆ„ÉÜ„Çπ„Éà
    try {
      const nextButton = page.locator('#loop >> text=Ê¨°„Å∏');
      await expect(nextButton).toBeVisible({ timeout: 1000 });
      await nextButton.click();
      console.log('‚Üí Ê¨°„Å∏„Éú„Çø„É≥: ‚úÖ Âãï‰ΩúÁ¢∫Ë™ç');
      
      // „Çπ„ÉÜ„ÉÉ„Éó„ÅåÈÄ≤„Çì„Å†„ÅãÁ¢∫Ë™ç
      await page.waitForTimeout(500);
      
      // Ââç„Å∏„Éú„Çø„É≥„ÅÆ„ÉÜ„Çπ„Éà
      try {
        const prevButton = page.locator('#loop >> text=Ââç„Å∏');
        await expect(prevButton).toBeVisible({ timeout: 1000 });
        await prevButton.click();
        console.log('‚Üí Ââç„Å∏„Éú„Çø„É≥: ‚úÖ Âãï‰ΩúÁ¢∫Ë™ç');
      } catch (error) {
        console.log('‚Üí Ââç„Å∏„Éú„Çø„É≥: ‚ùå Ë¶ã„Å§„Åã„Çâ„Å™„ÅÑ');
      }
    } catch (error) {
      console.log('‚Üí Ê¨°„Å∏„Éú„Çø„É≥: ‚ùå Ë¶ã„Å§„Åã„Çâ„Å™„ÅÑ');
    }
    
    console.log('üéâ „Çπ„ÉÜ„ÉÉ„ÉóÈÄ≤Ë°å„Éú„Çø„É≥„ÉÜ„Çπ„ÉàÂÆå‰∫Ü!');
  });
  
  // Á∑èÂêà„Ç®„É©„ÉºÊ§úÂá∫„ÉÜ„Çπ„ÉàÔºà‰øÆÊ≠£Âæå„ÅÆÊ§úË®ºÔºâ
  test('‰øÆÊ≠£Âæå„ÅÆÁ∑èÂêà„Ç®„É©„ÉºÊ§úÂá∫„ÉÜ„Çπ„Éà', async ({ page }) => {
    const filePath = path.join(__dirname, '..', 'index.html');
    
    // „Ç≥„É≥„ÇΩ„Éº„É´„Ç®„É©„Éº„Å®„Éö„Éº„Ç∏„Ç®„É©„Éº„Çí„Ç≠„É£„ÉÉ„ÉÅ
    const errors = [];
    page.on('console', msg => {
      if (msg.type() === 'error') {
        errors.push(`Console Error: ${msg.text()}`);
      }
    });
    
    page.on('pageerror', error => {
      errors.push(`Page Error: ${error.message}`);
    });
    
    await page.goto(`file://${filePath}`);
    
    console.log('üß™ ‰øÆÊ≠£Âæå„ÅÆÁ∑èÂêà„Ç®„É©„ÉºÊ§úÂá∫„ÉÜ„Çπ„ÉàÈñãÂßã');
    
    // ‰øÆÊ≠£„Åï„Çå„ÅüshowProgramFlow()„ÅÆ„ÉÜ„Çπ„Éà
    console.log('‚úÖ showProgramFlow()„ÅÆnullÂèÇÁÖß„Ç®„É©„Éº‰øÆÊ≠£„ÇíÊ§úË®º');
    try {
      await page.locator('[onclick="showProgramFlow()"]').click();
      await page.waitForTimeout(500);
      console.log('‚Üí showProgramFlow(): ‚úÖ „Ç®„É©„Éº„Å™„Åó');
    } catch (error) {
      errors.push(`showProgramFlow Error: ${error.message}`);
      console.log('‚Üí showProgramFlow(): ‚ùå „Åæ„Å†„Ç®„É©„Éº„ÅÇ„Çä');
    }
    
    // ‰øÆÊ≠£„Åï„Çå„ÅüupdateIfElseStep()„ÅÆ„ÉÜ„Çπ„Éà
    console.log('‚úÖ updateIfElseStep()„ÅÆnullÂèÇÁÖß„Ç®„É©„Éº‰øÆÊ≠£„ÇíÊ§úË®º');
    try {
      await page.evaluate(() => showHome());
      await page.locator('[onclick="showConditionalMenu()"]').click();
      await page.locator('[onclick="showIfElse()"]').click();
      await page.waitForTimeout(500);
      console.log('‚Üí updateIfElseStep(): ‚úÖ „Ç®„É©„Éº„Å™„Åó');
    } catch (error) {
      errors.push(`updateIfElseStep Error: ${error.message}`);
      console.log('‚Üí updateIfElseStep(): ‚ùå „Åæ„Å†„Ç®„É©„Éº„ÅÇ„Çä');
    }
    
    // Ë§áÊï∞„ÅÆÁîªÈù¢ÈÅ∑Áßª„ÇíÂÆüË°å„Åó„Å¶„Ç®„É©„Éº„Çí„ÉÅ„Çß„ÉÉ„ÇØ
    const testFlow = [
      () => page.evaluate(() => showHome()),
      () => page.locator('[onclick="showLoop()"]').click(),
      () => page.evaluate(() => showHome()),
      () => page.locator('[onclick="showConditionalMenu()"]').click(),
      () => page.locator('[onclick="showIfThen()"]').click(),
      () => page.evaluate(() => showHome()),
      () => page.locator('[onclick="showConditionalMenu()"]').click(),
      () => page.locator('[onclick="showIfElse()"]').click(),
      () => page.evaluate(() => showHome())
    ];
    
    for (let i = 0; i < testFlow.length; i++) {
      try {
        await testFlow[i]();
        await page.waitForTimeout(300);
      } catch (error) {
        errors.push(`Flow Error Step ${i + 1}: ${error.message}`);
      }
    }
    
    // „Ç®„É©„Éº„É¨„Éù„Éº„ÉàÔºà‰øÆÊ≠£Âæå„ÅÆÊúüÂæÖÂÄ§Ôºö„Ç®„É©„Éº„Å™„ÅóÔºâ
    if (errors.length > 0) {
      console.log('‚ùå ‰øÆÊ≠£Âæå„ÇÇ„Ç®„É©„ÉºÊ§úÂá∫:');
      errors.forEach((error, index) => {
        console.log(`  ${index + 1}. ${error}`);
      });
    } else {
      console.log('‚úÖ „Ç®„É©„Éº„Å™„Åó - ÂÖ®„Å¶„ÅÆ‰øÆÊ≠£„ÅåÊ≠£Â∏∏„Å´Âãï‰Ωú!');
    }
    
    console.log('üéâ ‰øÆÊ≠£Âæå„ÅÆÁ∑èÂêà„Ç®„É©„ÉºÊ§úÂá∫„ÉÜ„Çπ„ÉàÂÆå‰∫Ü!');
    
    // „ÉÜ„Çπ„Éà„ÅØÁ∂ôÁ∂öÔºà„Ç®„É©„Éº„Åå„ÅÇ„Å£„Å¶„ÇÇÂ§±Êïó„Åï„Åõ„Å™„ÅÑÔºâ
    expect(true).toBe(true);
  });

  // „É°„ÉÉ„Çª„Éº„Ç∏Á∑¥ÁøíÂïèÈ°å„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆ„ÉÜ„Çπ„Éà
  test('„É°„ÉÉ„Çª„Éº„Ç∏Á∑¥ÁøíÂïèÈ°å„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„ÉÜ„Çπ„Éà', async ({ page }) => {
    const filePath = path.join(__dirname, '..', 'index.html');
    await page.goto(`file://${filePath}`);
    
    console.log('üß™ „É°„ÉÉ„Çª„Éº„Ç∏Á∑¥ÁøíÂïèÈ°å„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„ÉÜ„Çπ„ÉàÈñãÂßã');
    
    // „É°„ÉÉ„Çª„Éº„Ç∏„É°„Éã„É•„Éº„Å´ÁßªÂãïÔºà„Éõ„Éº„É†„Éö„Éº„Ç∏„ÅÆ„Ç´„Éº„Éâ„ÇíÊåáÂÆöÔºâ
    await page.locator('#home-view [onclick="showMessagesMenu()"]').click();
    await expect(page.locator('#messages-menu')).toBeVisible();
    
    // „É°„ÉÉ„Çª„Éº„Ç∏ÈÄÅ‰ø°„Çª„ÇØ„Ç∑„Éß„É≥„Åã„ÇâÁ∑¥ÁøíÂïèÈ°å„Å∏„ÅÆ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„ÉÜ„Çπ„Éà
    console.log('‚úÖ „É°„ÉÉ„Çª„Éº„Ç∏ÈÄÅ‰ø°„Çª„ÇØ„Ç∑„Éß„É≥„Åã„ÇâÁ∑¥ÁøíÂïèÈ°å„Å∏„ÅÆÈÅ∑Áßª„ÉÜ„Çπ„Éà');
    
    // „É°„ÉÉ„Çª„Éº„Ç∏ÈÄÅ‰ø°„Çª„ÇØ„Ç∑„Éß„É≥„Å´ÁßªÂãï
    await page.locator('#messages-menu [onclick="showMessagesSend()"]').click();
    await expect(page.locator('#messages-send-section')).toBeVisible();
    
    // Á∑¥ÁøíÂïèÈ°å1„Éú„Çø„É≥„ÅÆÂ≠òÂú®Á¢∫Ë™ç
    const practice1Button = page.locator('button:has-text("Á∑¥ÁøíÂïèÈ°å1„Å∏")');
    await expect(practice1Button).toBeVisible();
    console.log('‚Üí Á∑¥ÁøíÂïèÈ°å1„Éú„Çø„É≥: ‚úÖ „ÅÇ„Çä');
    
    // Á∑¥ÁøíÂïèÈ°å2„Éú„Çø„É≥„ÅÆÂ≠òÂú®Á¢∫Ë™ç
    const practice2Button = page.locator('button:has-text("Á∑¥ÁøíÂïèÈ°å2„Å∏")');
    await expect(practice2Button).toBeVisible();
    console.log('‚Üí Á∑¥ÁøíÂïèÈ°å2„Éú„Çø„É≥: ‚úÖ „ÅÇ„Çä');
    
    // „É°„ÉÉ„Çª„Éº„Ç∏ÈÄÅ‰ø°„Å®ÂæÖÊ©ü„Çª„ÇØ„Ç∑„Éß„É≥„Åã„ÇâÁ∑¥ÁøíÂïèÈ°å„Å∏„ÅÆ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„ÉÜ„Çπ„Éà
    console.log('‚úÖ „É°„ÉÉ„Çª„Éº„Ç∏ÈÄÅ‰ø°„Å®ÂæÖÊ©ü„Çª„ÇØ„Ç∑„Éß„É≥„Åã„ÇâÁ∑¥ÁøíÂïèÈ°å„Å∏„ÅÆÈÅ∑Áßª„ÉÜ„Çπ„Éà');
    
    // „É°„ÉÉ„Çª„Éº„Ç∏ÈÄÅ‰ø°„Å®ÂæÖÊ©ü„Çª„ÇØ„Ç∑„Éß„É≥„Å´ÁßªÂãïÔºàJavaScript„ÅßÁõ¥Êé•ÂÆüË°åÔºâ
    await page.evaluate(() => showMessagesSendAndWait());
    await expect(page.locator('#messages-send-and-wait-section')).toBeVisible();
    
    // Á∑¥ÁøíÂïèÈ°å3„Éú„Çø„É≥„ÅÆÂ≠òÂú®Á¢∫Ë™ç
    const practice3Button = page.locator('button:has-text("Á∑¥ÁøíÂïèÈ°å3„Å∏")');
    await expect(practice3Button).toBeVisible();
    console.log('‚Üí Á∑¥ÁøíÂïèÈ°å3„Éú„Çø„É≥: ‚úÖ „ÅÇ„Çä');
    
    // Á∑¥ÁøíÂïèÈ°å4„Éú„Çø„É≥„ÅÆÂ≠òÂú®Á¢∫Ë™ç
    const practice4Button = page.locator('button:has-text("Á∑¥ÁøíÂïèÈ°å4„Å∏")');
    await expect(practice4Button).toBeVisible();
    console.log('‚Üí Á∑¥ÁøíÂïèÈ°å4„Éú„Çø„É≥: ‚úÖ „ÅÇ„Çä');
    
    // ÂêÑÁ∑¥ÁøíÂïèÈ°å„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆ„ÉÜ„Çπ„Éà
    const practiceProblems = [
      { 
        name: '„É°„ÉÉ„Çª„Éº„Ç∏Á∑¥ÁøíÂïèÈ°å1Ôºö„Ç≠„É£„É©„ÇØ„Çø„Éº„Å´Êå®Êã∂', 
        buttonText: 'Á∑¥ÁøíÂïèÈ°å1„Å∏',
        sectionId: 'messages-send-practice1',
        answerBtnId: 'messagesSendPractice1AnswerBtn'
      },
      { 
        name: '„É°„ÉÉ„Çª„Éº„Ç∏Á∑¥ÁøíÂïèÈ°å2Ôºö„Ç≤„Éº„É†ÈñãÂßã„ÅÆÂêàÂõ≥', 
        buttonText: 'Á∑¥ÁøíÂïèÈ°å2„Å∏',
        sectionId: 'messages-send-practice2',
        answerBtnId: 'messagesSendPractice2AnswerBtn'
      },
      { 
        name: '„É°„ÉÉ„Çª„Éº„Ç∏Á∑¥ÁøíÂïèÈ°å3ÔºöÈ†ÜÁï™„Å´Âãï„Åã„Åù„ÅÜ', 
        buttonText: 'Á∑¥ÁøíÂïèÈ°å3„Å∏',
        sectionId: 'messages-wait-practice1',
        answerBtnId: 'messagesWaitPractice1AnswerBtn'
      },
      { 
        name: '„É°„ÉÉ„Çª„Éº„Ç∏Á∑¥ÁøíÂïèÈ°å4Ôºö‰ºöË©±„ÅÆ„Ç≠„É£„ÉÉ„ÉÅ„Éú„Éº„É´', 
        buttonText: 'Á∑¥ÁøíÂïèÈ°å4„Å∏',
        sectionId: 'messages-wait-practice2',
        answerBtnId: 'messagesWaitPractice2AnswerBtn'
      }
    ];
    
    for (const problem of practiceProblems) {
      console.log(`‚úÖ ${problem.name}„Çí„ÉÜ„Çπ„Éà`);
      
      // ÈÅ©Âàá„Å™Â≠¶Áøí„Çª„ÇØ„Ç∑„Éß„É≥„Å´Êàª„Çã
      if (problem.sectionId.includes('send-practice')) {
        await page.evaluate(() => showMessagesSend());
        await expect(page.locator('#messages-send-section')).toBeVisible();
      } else {
        await page.evaluate(() => showMessagesSendAndWait());
        await expect(page.locator('#messages-send-and-wait-section')).toBeVisible();
      }
      
      // Á∑¥ÁøíÂïèÈ°å„Éú„Çø„É≥„Çí„ÇØ„É™„ÉÉ„ÇØ
      const problemButton = page.locator(`button:has-text("${problem.buttonText}")`);
      await expect(problemButton).toBeVisible();
      await problemButton.click();
      
      // Á∑¥ÁøíÂïèÈ°å„Çª„ÇØ„Ç∑„Éß„É≥Ë°®Á§∫Á¢∫Ë™ç
      try {
        await expect(page.locator(`#${problem.sectionId}`)).toBeVisible({ timeout: 2000 });
        console.log(`‚Üí ${problem.name}„Çª„ÇØ„Ç∑„Éß„É≥Ë°®Á§∫: ‚úÖ ÊàêÂäü`);
        
        // „Éõ„Éº„É†„Éú„Çø„É≥„ÅÆÂ≠òÂú®Á¢∫Ë™ç
        try {
          const homeButton = page.locator(`#${problem.sectionId} >> text=„Éõ„Éº„É†„Å´Êàª„Çã`);
          await expect(homeButton).toBeVisible({ timeout: 1000 });
          console.log(`‚Üí ${problem.name}„ÅÆ„Éõ„Éº„É†„Éú„Çø„É≥: ‚úÖ „ÅÇ„Çä`);
        } catch (error) {
          console.log(`‚Üí ${problem.name}„ÅÆ„Éõ„Éº„É†„Éú„Çø„É≥: ‚ùå „Å™„Åó - ‰øÆÊ≠£„ÅåÂøÖË¶Å!`);
        }
        
        // Á≠î„ÅàË°®Á§∫„Éú„Çø„É≥„ÅÆÂ≠òÂú®Á¢∫Ë™ç
        try {
          const answerButton = page.locator(`#${problem.answerBtnId}`);
          await expect(answerButton).toBeVisible({ timeout: 1000 });
          console.log(`‚Üí ${problem.name}„ÅÆÁ≠î„ÅàË°®Á§∫„Éú„Çø„É≥: ‚úÖ „ÅÇ„Çä`);
          
          // Á≠î„ÅàË°®Á§∫Ê©üËÉΩ„ÅÆ„ÉÜ„Çπ„Éà
          await answerButton.click();
          const answerSection = page.locator(`#${problem.sectionId.replace('-', '-')}-answer`);
          await expect(answerSection).toBeVisible({ timeout: 1000 });
          console.log(`‚Üí ${problem.name}„ÅÆÁ≠î„ÅàË°®Á§∫Ê©üËÉΩ: ‚úÖ Âãï‰Ωú`);
        } catch (error) {
          console.log(`‚Üí ${problem.name}„ÅÆÁ≠î„ÅàË°®Á§∫Ê©üËÉΩ: ‚ùå Âãï‰Ωú„Åó„Å™„ÅÑ - ‰øÆÊ≠£„ÅåÂøÖË¶Å!`);
        }
        
      } catch (error) {
        console.log(`‚Üí ${problem.name}„Çª„ÇØ„Ç∑„Éß„É≥Ë°®Á§∫: ‚ùå Â§±Êïó - „Çª„ÇØ„Ç∑„Éß„É≥„ÅåË¶ã„Å§„Åã„Çâ„Å™„ÅÑ`);
      }
      
      // „É°„ÉÉ„Çª„Éº„Ç∏„É°„Éã„É•„Éº„Å´Êàª„Çã
      try {
        await page.evaluate(() => showMessagesMenu());
        await expect(page.locator('#messages-menu')).toBeVisible();
      } catch (error) {
        // History API„Ç®„É©„Éº„ÇíÁÑ°Ë¶ñ
        console.log('‚Üí „É°„Éã„É•„Éº„Å´Êàª„Çã: ‚ö†Ô∏è History API„Ç®„É©„ÉºÔºàÁÑ°Ë¶ñÔºâ');
        await page.evaluate(() => {
          hideAllViews();
          document.getElementById('messages-menu').style.display = 'block';
        });
      }
    }
    
    console.log('üéâ „É°„ÉÉ„Çª„Éº„Ç∏Á∑¥ÁøíÂïèÈ°å„Çµ„Éñ„Çª„ÇØ„Ç∑„Éß„É≥„ÉÜ„Çπ„ÉàÂÆå‰∫Ü!');
  });
  
});