# 練習問題テンプレート

このファイルは、新しい練習問題セクションを作成する際の標準テンプレートを提供します。

## 基本構造テンプレート

### HTML構造

```html
<!-- [テーマ名]練習問題[番号]：[タイトル] -->
<div id="[practice-id]" style="display: none;">
    <div class="container">
        <div class="header">
            <h1>[絵文字] 練習問題[番号]：[タイトル]</h1>
            <p>[サブタイトル説明]</p>
        </div>

        <div class="info-box problem">
            <strong>🎯 チャレンジ：</strong> [問題の概要説明]<br><br>
            <strong>やること：</strong><br>
            1. [具体的手順1]<br>
            2. [具体的手順2]<br>
            3. [具体的手順3]
        </div>

        <div class="blocks-container">
            <div class="block-group">
                <h4>[絵文字] [スプライト名]のスクリプト</h4>
                <pre class="blocks">[Scratchブロック表記]</pre>
            </div>

            <div class="block-group">
                <h4>[絵文字] [スプライト名]のスクリプト</h4>
                <pre class="blocks">[Scratchブロック表記]</pre>
            </div>
        </div>

        <div class="info-box tip">
            <button class="btn answer-btn" onclick="show[PracticeId]Answer()" id="[practiceId]AnswerBtn">💡 答えを表示</button>
            <div class="answer-section" id="[practice-id]-answer" style="display: none;">
                <div class="tip-content">
                    <strong>✅ 解答のポイント：</strong><br><br>
                    
                    <strong>📝 実装手順：</strong><br>
                    1. [詳細手順1]<br>
                    2. [詳細手順2]<br>
                    3. [詳細手順3]<br><br>
                    
                    <strong>🔧 正しいブロック構成：</strong><br><br>
                    
                    <div class="blocks-container">
                        <div class="block-group">
                            <h4>[絵文字] [スプライト名]のスクリプト（完成版）</h4>
                            <pre class="blocks">[完成したScratchブロック表記]</pre>
                        </div>

                        <div class="block-group">
                            <h4>[絵文字] [スプライト名]のスクリプト（完成版）</h4>
                            <pre class="blocks">[完成したScratchブロック表記]</pre>
                        </div>
                    </div><br>
                    
                    <strong>🎉 実行結果：</strong><br>
                    • [期待される結果1]<br>
                    • [期待される結果2]<br>
                    • [期待される結果3]
                </div>
            </div>
        </div>

        <div class="step-nav">
            <button class="btn" onclick="show[MenuFunction]()" style="background: #666;">メニューに戻る</button>
        </div>
    </div>
</div>
```

### JavaScript関数テンプレート

```javascript
// セクション表示関数
function show[PracticeId]() {
    hideAllViews();
    document.getElementById('[practice-id]').style.display = 'block';
    
    // 履歴管理
    updateHistory('[practice-id]', '[練習問題タイトル]');
}

// 答え表示関数
function show[PracticeId]Answer() {
    document.getElementById('[practice-id]-answer').style.display = 'block';
    document.getElementById('[practiceId]AnswerBtn').disabled = true;
    document.getElementById('[practiceId]AnswerBtn').textContent = '✅ 答えを表示中';
}
```

### 履歴管理への追加

```javascript
// hideAllViews関数の配列に追加
'[practice-id]',

// ブラウザバック処理のswitch文に追加
case '[practice-id]':
    show[PracticeId]();
    break;
```

## 命名規則

### ID命名パターン
- **セクションID**: `[theme]-[type]-practice[number]`
  - 例: `messages-send-practice1`, `variables-score-practice2`
- **答えセクションID**: `[practice-id]-answer`
- **答えボタンID**: `[practiceId]AnswerBtn` (キャメルケース)

### 関数命名パターン
- **表示関数**: `show[PracticeId]()`
  - 例: `showMessagesSendPractice1()`, `showVariablesScorePractice2()`
- **答え関数**: `show[PracticeId]Answer()`

## Scratchブロック表記

### 基本ブロック例

```
// イベントブロック
when @greenFlag clicked :: events hat
when [space v] key pressed :: events hat
when I receive [メッセージ名] :: events hat

// 見た目ブロック
say [テキスト] :: looks
say [テキスト] for (2) seconds :: looks

// 動きブロック
move (10) steps :: motion
go to x: (0) y: (0) :: motion

// 制御ブロック
wait (1) seconds :: control
repeat (10) {
    [ここにブロック]
} :: control

// イベント（送信）
broadcast [メッセージ名] :: events
broadcast [メッセージ名] and wait :: events

// 変数
set [変数名 v] to (0) :: variables
change [変数名 v] by (1) :: variables
```

### 色分けコード
- `:: events` - イベント（黄色）
- `:: looks` - 見た目（紫色）
- `:: motion` - 動き（青色）
- `:: control` - 制御（オレンジ色）
- `:: variables` - 変数（緑色）

## 実装例

### 例：メッセージ練習問題

```html
<!-- メッセージ送信練習問題1：キャラクターに挨拶させよう -->
<div id="messages-send-practice1" style="display: none;">
    <div class="container">
        <div class="header">
            <h1>👋 練習問題1：キャラクターに挨拶させよう</h1>
            <p>基本的なメッセージ送信の練習をしましょう</p>
        </div>

        <div class="info-box problem">
            <strong>🎯 チャレンジ：</strong> ネコがイヌに「おはよう」メッセージを送る練習をしてみましょう！<br><br>
            <strong>やること：</strong><br>
            1. ネコが緑の旗をクリックされたとき「おはよう」と言う<br>
            2. 同時に「イヌへ挨拶」メッセージを送る<br>
            3. イヌがメッセージを受け取ったら「おはよう！」と返事する
        </div>

        <div class="blocks-container">
            <div class="block-group">
                <h4>🐱 ネコのスクリプト</h4>
                <pre class="blocks">when @greenFlag clicked :: events hat
say [おはよう] for (2) seconds :: looks
broadcast [イヌへ挨拶] :: events</pre>
            </div>

            <div class="block-group">
                <h4>🐶 イヌのスクリプト</h4>
                <pre class="blocks">when I receive [イヌへ挨拶] :: events hat
say [おはよう！] for (2) seconds :: looks</pre>
            </div>
        </div>

        <div class="info-box tip">
            <button class="btn answer-btn" onclick="showMessagesSendPractice1Answer()" id="messagesSendPractice1AnswerBtn">💡 答えを表示</button>
            <div class="answer-section" id="messages-send-practice1-answer" style="display: none;">
                <div class="tip-content">
                    <strong>✅ 解答のポイント：</strong><br><br>
                    
                    <strong>📝 実装手順：</strong><br>
                    1. ネコに「🏁 がクリックされたとき」ブロックを配置<br>
                    2. 「おはよう」と2秒言うブロックを追加<br>
                    3. 「イヌへ挨拶」を送るブロックを追加<br>
                    4. イヌに「イヌへ挨拶」を受け取ったときブロックを配置<br>
                    5. 「おはよう！」と2秒言うブロックを追加<br><br>
                    
                    <strong>🔧 正しいブロック構成：</strong><br><br>
                    
                    <div class="blocks-container">
                        <div class="block-group">
                            <h4>🐱 ネコのスクリプト（完成版）</h4>
                            <pre class="blocks">when @greenFlag clicked :: events hat
say [おはよう] for (2) seconds :: looks
broadcast [イヌへ挨拶] :: events</pre>
                        </div>

                        <div class="block-group">
                            <h4>🐶 イヌのスクリプト（完成版）</h4>
                            <pre class="blocks">when I receive [イヌへ挨拶] :: events hat
say [おはよう！] for (2) seconds :: looks</pre>
                        </div>
                    </div><br>
                    
                    <strong>🎉 実行結果：</strong><br>
                    • 緑の旗をクリックするとネコが「おはよう」と言う<br>
                    • 同時にイヌが「おはよう！」と返事する<br>
                    • スプライト間でのコミュニケーションが成功！
                </div>
            </div>
        </div>

        <div class="step-nav">
            <button class="btn" onclick="showMessagesMenu()" style="background: #666;">メニューに戻る</button>
        </div>
    </div>
</div>
```

## チェックリスト

### 実装前確認
- [ ] セクションIDが一意であることを確認
- [ ] 命名規則に従った名前付けになっている
- [ ] 必要なJavaScript関数が定義されている
- [ ] hideAllViews配列に追加されている
- [ ] ブラウザバック処理に追加されている

### 実装後確認
- [ ] Scratchブロックが正しくレンダリングされる
- [ ] 答えボタンが正常に動作する
- [ ] メニューに戻るボタンが機能する
- [ ] レスポンシブデザインが保たれている
- [ ] 自動テストに問題セクションが含まれている

## 注意事項

1. **Scratchblocks.js表記**: 必ず `<pre class="blocks">` を使用してScratchblocks.jsライブラリによる自動レンダリングを活用する

2. **日本語対応**: ブロック内のテキストは日本語で記述し、子供にとって分かりやすい表現を心がける

3. **統一性**: 既存の練習問題と同じスタイル、レイアウト、色使いを維持する

4. **教育的配慮**: 段階的な難易度設計と、明確な学習目標を設定する

5. **テスト**: 実装後は必ず動作確認とPlaywrightテストへの追加を行う